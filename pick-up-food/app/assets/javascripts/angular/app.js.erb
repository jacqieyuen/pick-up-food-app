'use strict';

// var app = angular.module('appName', ['oneDependency']);
var app = angular.module('pick_up_food', ['ui.router', 'ui.bootstrap', 'ng-token-auth', 'ngStorage']);

app.config(['$stateProvider', '$urlRouterProvider', '$authProvider', function($stateProvider, $urlRouterProvider, $authProvider) {
  $urlRouterProvider.otherwise('/');

  $authProvider.configure({
    apiUrl: 'http://localhost:3000'
  });

  // Configure Angular Routes
  $stateProvider
    .state({
    abstract: true,
    name: "header",
    templateUrl: "<%= asset_path('abstracts/header.html') %>",
    controller: 'HeaderCtrl'
    })
    .state({
      name:'header.home',
      url:'/',
      templateUrl: "<%= asset_path('static_pages/index.html') %>",
      controller: 'StaticPagesCtrl'
    })
    .state({
      name:'header.signup',
      url:'/signup',
      templateUrl: "<%= asset_path('auth/signup.html') %>",
      controller: 'SignUpCtrl'
    })
    .state({
      name:'header.login',
      url:'/login',
      templateUrl: "<%= asset_path('auth/login.html') %>",
      controller: 'LogInCtrl'
    })
    .state({
      name:'header.menu',
      url:'/menu',
      templateUrl: "<%= asset_path('customer/menu.html') %>",
      controller: 'MenuCtrl'
    })
    .state({
      name:'checkout',
      url:'/checkout',
      templateUrl: "<%= asset_path('customer/checkout.html') %>",
      controller: 'CheckoutCtrl',
      resolve: {
          auth: function($auth) {
            return $auth.validateUser();
          }
        }
    })
    .state({
      name:'header.order_summary',
      url:'/order_summary',
      templateUrl: "<%= asset_path('customer/ordersummary.html') %>",
      controller: 'OrderSummaryCtrl',
      resolve: {
          auth: function($auth) {
            return $auth.validateUser();
          }
        }
    });


}]);